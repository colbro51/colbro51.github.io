<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Long Press Event Logger</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #btn {
      padding: 20px 40px;
      font-size: 16px;
      cursor: pointer;
      user-select: none;
      touch-action: none; /* important for touch long-press */
    }
    #log {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      height: 200px;
      overflow-y: auto;
      white-space: pre-wrap;
      background: #f9f9f9;
      font-family: monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <button id="btn">Press and hold me</button>
  <div id="log"></div>

  <script>
    const btn = document.getElementById('btn');
    const logDiv = document.getElementById('log');

    let t0 = null;          // time of initial pointerdown
    let activePointerId = null;

    function log(message, ev) {
      if (t0 === null) {
        // If we somehow get an event before pointerdown, just use its own timestamp as baseline
        t0 = ev.timeStamp;
      }
      const dt = ev.timeStamp - t0; // ms relative to initial pointerdown
      const line = `${dt.toFixed(1)} ms: ${message}`;
      logDiv.textContent += line + '\n';
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    btn.addEventListener('pointerdown', (ev) => {
      // Start a new sequence
      t0 = ev.timeStamp;
      activePointerId = ev.pointerId;
      log('pointerdown', ev);
      // Capture pointer so we keep getting events even if it moves off the button
      btn.setPointerCapture(ev.pointerId);
    });

    btn.addEventListener('pointermove', (ev) => {
      if (ev.pointerId !== activePointerId || t0 === null) return;
      log('pointermove', ev);
    });

    btn.addEventListener('pointerup', (ev) => {
      if (ev.pointerId !== activePointerId || t0 === null) return;
      log('pointerup', ev);
      btn.releasePointerCapture(ev.pointerId);
      activePointerId = null;
      // Optionally reset t0 here if you want each press to be independent
      // t0 = null;
    });

    btn.addEventListener('pointercancel', (ev) => {
      if (ev.pointerId !== activePointerId || t0 === null) return;
      log('pointercancel', ev);
      btn.releasePointerCapture(ev.pointerId);
      activePointerId = null;
      // t0 = null;
    });
  </script>
</body>
</html>