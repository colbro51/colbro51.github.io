<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: sans-serif; padding: 20px; font-size: 28px; }
  #btn {
    padding: 30px;
    font-size: 32px;
    width: 100%;
    touch-action: none;
    user-select: none;
  }
  #log {
    margin-top: 20px;
    padding: 20px;
    border: 3px solid #aaa;
    height: 1000px;
    overflow-y: auto;
    background: #eee;
    font-family: monospace;
    font-size: 34px;
    white-space: pre-wrap;
    line-height: 1.4;
  }
  #maps {
    display: none;
    padding: 40px;
    background: #cfe3ff;
    font-size: 40px;
    text-align: center;
  }
</style>
</head>
<body>

<button id="btn">LONG‑PRESS ME</button>
<div id="maps">Maps screen… returning in 1s</div>
<div id="log"></div>

<script>
const btn = document.getElementById('btn');
const maps = document.getElementById('maps');
const logDiv = document.getElementById('log');

let t0 = null;
let longPressTimer = null;
let activePointer = null;

function log(msg, ev) {
  if (t0 === null) t0 = ev.timeStamp;
  const dt = (ev.timeStamp - t0).toFixed(1);
  logDiv.textContent += `${dt} ms: ${msg}\n`;
  logDiv.scrollTop = logDiv.scrollHeight;
}

btn.addEventListener('pointerdown', ev => {
  t0 = ev.timeStamp;
  activePointer = ev.pointerId;
  log("pointerdown", ev);

  btn.setPointerCapture(ev.pointerId);

  longPressTimer = setTimeout(() => {
    log("LONG PRESS TRIGGERED", ev);
    showMapsScreen();
  }, 600);
});

btn.addEventListener('pointerup', ev => {
  if (ev.pointerId !== activePointer) return;
  log("pointerup", ev);
  clearTimeout(longPressTimer);
  btn.releasePointerCapture(ev.pointerId);
});

btn.addEventListener('pointercancel', ev => {
  if (ev.pointerId !== activePointer) return;
  log("pointercancel", ev);
  clearTimeout(longPressTimer);
  btn.releasePointerCapture(ev.pointerId);
});

btn.addEventListener('pointermove', ev => {
  if (ev.pointerId !== activePointer) return;
  log("pointermove", ev);
});

btn.addEventListener('click', ev => {
  log("CLICK", ev);
});

function showMapsScreen() {
  btn.style.display = "none";
  maps.style.display = "block";

  setTimeout(() => {
    maps.style.display = "none";
    btn.style.display = "block";
    log("RETURNED FROM MAPS", { timeStamp: performance.now() });
  }, 1000);
}
</script>

</body>
</html>